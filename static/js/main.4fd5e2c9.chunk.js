(this.webpackJsonpmovieapp=this.webpackJsonpmovieapp||[]).push([[0],{17:function(e,t,a){e.exports=a(40)},40:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(16),s=a.n(c),o=a(3),l=a(4),r=a(6),u=a(5),m=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={searchText:"",placeHolder:"Veuillez saisir votre film",intervalBeforeRequest:3e3,lockRequest:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-8 input-group"},i.a.createElement("input",{className:"form-control input-lg",type:"text",onKeyUp:this.handleChange.bind(this),placeholder:this.state.placeHolder}),i.a.createElement("span",{className:"input-group-btn"},i.a.createElement("button",{className:"btn btn-secondary",onClick:this.handleOnClick.bind(this)},"Go"))))}},{key:"handleChange",value:function(e){console.log("Saisie",e.target.value),this.setState({searchText:e.target.value}),this.state.lockRequest||(this.setState({lockRequest:!0}),setTimeout(function(){this.search()}.bind(this),this.state.intervalBeforeRequest))}},{key:"search",value:function(){this.props.callback(this.state.searchText),this.setState({lockRequest:!1})}},{key:"handleOnClick",value:function(){this.search()}}]),a}(n.Component),d=function(e){var t=e.movie,a=10*t.vote_average;return console.log(a),i.a.createElement("li",{className:"list-group-item",onClick:function(){e.callback(t)}},i.a.createElement("div",{className:"media"},i.a.createElement("div",{className:"media-left"},i.a.createElement("img",{className:"media-object img-rounded",height:"100px",width:"100px",src:"".concat("https://image.tmdb.org/t/p/w500").concat(t.poster_path),alt:"film"})),i.a.createElement("div",{className:"media-body"},i.a.createElement("h5",{className:"title_list"},t.title))))},v=function(e){var t=e.movieList;return console.log(t),i.a.createElement("div",null,i.a.createElement("ul",null,t.map((function(e){return i.a.createElement(d,{key:e.id,movie:e,callback:a})}))));function a(t){e.callback(t)}},h=a(2),p=a.n(h),f=function(e){var t=e.title,a=e.description,n=e.avis;return i.a.createElement("div",null,i.a.createElement("h1",null,t),i.a.createElement("p",null,a),i.a.createElement("p",null,n," % des utilisateurs ont aim\xe9 ce film"))},b=function(e){var t=e.videoId;return i.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},i.a.createElement("iframe",{className:"embed-responsive-item",src:"".concat("https://www.youtube.com/embed/").concat(t)}))},g="https://api.themoviedb.org/3/",k="api_key=83c6111d367f0146a56cb5c464466b1b",E=function(e){Object(r.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={movieList:{},currentMovie:{}},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.initMovies()}},{key:"initMovies",value:function(){p.a.get("".concat(g).concat("discover/movie?language=fr&sort_by=popularity.desc&include_adult=false&append_to_response=images","&").concat(k)).then(function(e){this.setState({movieList:e.data.results.slice(1,6),currentMovie:e.data.results[0]},(function(){this.applyVideoToCurrentMovie()})),console.log(this.state.movieList),console.log(this.state.currentMovie)}.bind(this))}},{key:"applyVideoToCurrentMovie",value:function(){p.a.get("".concat(g,"movie/").concat(this.state.currentMovie.id,"?").concat(k,"&append_to_response=videos&include_adult=false")).then(function(e){var t=e.data.videos.results[0].key,a=this.state.currentMovie;a.videoId=t,this.setState({currentMovie:a}),console.log(a)}.bind(this))}},{key:"onClickListItem",value:function(e){this.setState({currentMovie:e},(function(){this.applyVideoToCurrentMovie(),this.setRecommendation()}))}},{key:"setRecommendation",value:function(){p.a.get("".concat(g,"movie/").concat(this.state.currentMovie.id,"/recommendations?").concat(k,"&language=fr")).then(function(e){this.setState({movieList:e.data.results.slice(0,5)})}.bind(this))}},{key:"onClickSearch",value:function(e){e&&p.a.get("".concat(g).concat("search/movie?language=fr&include_adult=false","&").concat(k,"&query=").concat(e)).then(function(e){var t=this;e.data&&e.data.results[0]&&e.data.results[0].id!==this.state.currentMovie.id&&this.setState({currentMovie:e.data.results[0]},(function(){t.applyVideoToCurrentMovie(),t.setRecommendation()}))}.bind(this)),console.log(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"search_bar"},i.a.createElement(m,{callback:this.onClickSearch.bind(this)})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-8"},i.a.createElement(b,{videoId:this.state.currentMovie.videoId}),i.a.createElement(f,{title:this.state.currentMovie.title,description:this.state.currentMovie.overview,avis:10*this.state.currentMovie.vote_average})),i.a.createElement("div",{className:"col-md-4"},function(){if(e.state.movieList.length>=5)return i.a.createElement(v,{movieList:e.state.movieList,callback:e.onClickListItem.bind(e)})}())))}}]),a}(n.Component);s.a.render(i.a.createElement(E,null),document.querySelector(".container"))}},[[17,1,2]]]);
//# sourceMappingURL=main.4fd5e2c9.chunk.js.map