{"version":3,"sources":["components/searchBar.js","components/videoListItem.js","containers/videoList.js","components/videoDetail.js","components/Video.js","containers/App.js","index.js"],"names":["SearchBar","props","state","searchText","placeHolder","intervalBeforeRequest","lockRequest","className","type","onKeyUp","this","handleChange","bind","placeholder","onClick","handleOnClick","event","console","log","target","value","setState","setTimeout","search","callback","Component","VideoListItem","movie","avis","vote_average","height","width","src","poster_path","alt","title","VideoList","movieList","map","key","id","receiveCallBack","VideoDetail","description","Video","videoId","API_END_POINT","API_KEY","App","currentMovie","initMovies","axios","get","then","response","data","results","slice","applyVideoToCurrentMovie","youtubeKey","videos","newCurrentMovieState","setRecommendation","onClickSearch","overview","length","onClickListItem","renderVideoList","ReactDOM","render","document","querySelector"],"mappings":"iNA6DeA,E,kDA1Db,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CACXC,WAAY,GACZC,YAAa,6BACbC,sBAAuB,IACvBC,aAAa,GANE,E,qDAUjB,OACE,yBAAKC,UAAU,OACb,yBAAKA,UAAU,wBACb,2BACEA,UAAU,wBACVC,KAAK,OAELC,QAASC,KAAKC,aAAaC,KAAKF,MAChCG,YAAaH,KAAKR,MAAME,cAE1B,0BAAMG,UAAU,mBACd,4BACEA,UAAU,oBACVO,QAASJ,KAAKK,cAAcH,KAAKF,OAFnC,W,mCAYGM,GACXC,QAAQC,IAAI,SAAUF,EAAMG,OAAOC,OAInCV,KAAKW,SAAS,CAAElB,WAAYa,EAAMG,OAAOC,QACpCV,KAAKR,MAAMI,cACdI,KAAKW,SAAS,CAAEf,aAAa,IAC7BgB,WACE,WACEZ,KAAKa,UACLX,KAAKF,MACPA,KAAKR,MAAMG,0B,+BAMfK,KAAKT,MAAMuB,SAASd,KAAKR,MAAMC,YAC/BO,KAAKW,SAAS,CAACf,aAAY,M,sCAG3BI,KAAKa,a,GAxDeE,aCiCTC,EA/BO,SAACzB,GAAW,IACzB0B,EAAS1B,EAAT0B,MACHC,EAA4B,GAArBD,EAAME,aAIjB,OAHDZ,QAAQC,IAAIU,GAIT,wBAAIrB,UAAU,kBAAkBO,QAkBlC,WACEb,EAAMuB,SAASG,KAlBb,yBAAKpB,UAAU,SACb,yBAAKA,UAAU,cACb,yBACEA,UAAU,2BACVuB,OAAO,QACPC,MAAM,QACNC,IAAG,UAhBG,mCAgBH,OAAiBL,EAAMM,aAC1BC,IAAI,UAGR,yBAAK3B,UAAU,cACb,wBAAIA,UAAU,cAAcoB,EAAMQ,WCG7BC,EAvBG,SAACnC,GAAW,IACpBoC,EAAcpC,EAAdoC,UAER,OADApB,QAAQC,IAAImB,GAEV,6BACE,4BACGA,EAAUC,KAAI,SAACX,GACd,OACE,kBAAC,EAAD,CACEY,IAAKZ,EAAMa,GACXb,MAAOA,EACPH,SAAUiB,SAOtB,SAASA,EAAgBd,GACvB1B,EAAMuB,SAASG,K,gBCTJe,EAXK,SAAC,GAAkC,IAAhCP,EAA+B,EAA/BA,MAAOQ,EAAwB,EAAxBA,YAAaf,EAAW,EAAXA,KAEzC,OACE,6BACE,4BAAKO,GACL,2BAAIQ,GACJ,2BAAIf,EAAJ,6CCISgB,EARD,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACZ,OACI,yBAAKtC,UAAU,2CACX,4BAAQA,UAAU,wBAAwByB,IAAG,UALxC,kCAKwC,OAAgBa,OCAnEC,EAAgB,gCAGhBC,EAAU,2CA8HDC,E,kDA1Hb,WAAY/C,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CAAEmC,UAAW,GAAIY,aAAc,IAF3B,E,iEAMjBvC,KAAKwC,e,mCAKLC,IAAMC,IAAN,UAAaN,GAAb,OAhBF,mGAgBE,YAAmDC,IAAWM,KAC5D,SAAUC,GAGR5C,KAAKW,SACH,CACEgB,UAAWiB,EAASC,KAAKC,QAAQC,MAAM,EAAG,GAC1CR,aAAcK,EAASC,KAAKC,QAAQ,KAEtC,WACE9C,KAAKgD,8BAITzC,QAAQC,IAAIR,KAAKR,MAAMmC,WACvBpB,QAAQC,IAAIR,KAAKR,MAAM+C,eACvBrC,KAAKF,S,iDAMTyC,IACGC,IADH,UAEON,EAFP,iBAE6BpC,KAAKR,MAAM+C,aAAaT,GAFrD,YAE2DO,EAF3D,mDAIGM,KACC,SAAUC,GACR,IAAMK,EAAaL,EAASC,KAAKK,OAAOJ,QAAQ,GAAGjB,IAC/CsB,EAAuBnD,KAAKR,MAAM+C,aACtCY,EAAqBhB,QAAUc,EAC/BjD,KAAKW,SAAS,CAAE4B,aAAcY,IAE9B5C,QAAQC,IAAI2C,IACZjD,KAAKF,S,sCAIGiB,GACdjB,KAAKW,SAAS,CAAE4B,aAActB,IAAS,WACrCjB,KAAKgD,2BACLhD,KAAKoD,yB,0CAKPX,IAAMC,IAAN,UAAaN,EAAb,iBAAmCpC,KAAKR,MAAM+C,aAAaT,GAA3D,4BAAiFO,EAAjF,iBAAwGM,KACtG,SAAUC,GAGR5C,KAAKW,SACH,CACEgB,UAAWiB,EAASC,KAAKC,QAAQC,MAAM,EAAG,MAE9C7C,KAAKF,S,oCAIGP,GACRA,GACFgD,IACGC,IADH,UACUN,GADV,OA1Ea,+CA0Eb,YACwCC,EADxC,kBACyD5C,IACtDkD,KACC,SAAUC,GAAW,IAAD,OACfA,EAASC,MAAQD,EAASC,KAAKC,QAAQ,IACnCF,EAASC,KAAKC,QAAQ,GAAGhB,KAAO9B,KAAKR,MAAM+C,aAAaT,IACvD9B,KAAKW,SAAS,CAAC4B,aAAcK,EAASC,KAAKC,QAAQ,KAAK,WACtD,EAAKE,2BACL,EAAKI,wBAKflD,KAAKF,OAIbO,QAAQC,IAAIf,K,+BAEJ,IAAD,OAWP,OACE,6BACE,yBAAKI,UAAU,cACb,kBAAC,EAAD,CAAWiB,SAAUd,KAAKqD,cAAcnD,KAAKF,SAE/C,yBAAKH,UAAU,OACb,yBAAKA,UAAU,YACb,kBAAC,EAAD,CAAOsC,QAASnC,KAAKR,MAAM+C,aAAaJ,UACxC,kBAAC,EAAD,CACEV,MAAOzB,KAAKR,MAAM+C,aAAad,MAC/BQ,YAAajC,KAAKR,MAAM+C,aAAae,SACrCpC,KAA2C,GAArClB,KAAKR,MAAM+C,aAAapB,gBAGlC,yBAAKtB,UAAU,YAxBG,WACtB,GAAI,EAAKL,MAAMmC,UAAU4B,QAAU,EACjC,OACE,kBAAC,EAAD,CACE5B,UAAW,EAAKnC,MAAMmC,UACtBb,SAAU,EAAK0C,gBAAgBtD,KAAK,KAmBXuD,U,GApHnB1C,aCNlB2C,IAASC,OAAO,kBAAC,EAAD,MAAQC,SAASC,cAAc,iB","file":"static/js/main.4fd5e2c9.chunk.js","sourcesContent":["import React, { Component } from \"react\";\n\nclass SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\",\n      placeHolder: \"Veuillez saisir votre film\",\n      intervalBeforeRequest: 3000,\n      lockRequest: false,\n    };\n  }\n  render() {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-8 input-group\">\n          <input\n            className=\"form-control input-lg\"\n            type=\"text\"\n            //bind : pour que le this fasse référence à la classe et non à la fonction\n            onKeyUp={this.handleChange.bind(this)}\n            placeholder={this.state.placeHolder}\n          />\n          <span className=\"input-group-btn\">\n            <button\n              className=\"btn btn-secondary\"\n              onClick={this.handleOnClick.bind(this)}\n            >\n              Go\n            </button>\n          </span>\n        </div>\n      </div>\n    );\n  }\n  //event.target.value : récupère la valeur de l'input\n  handleChange(event) {\n    console.log(\"Saisie\", event.target.value);\n\n    //Va modifier le state de searchText\n    //Dès que le setState est appelé ça va rappeler le render\n    this.setState({ searchText: event.target.value });\n    if (!this.state.lockRequest) {\n      this.setState({ lockRequest: true });\n      setTimeout(\n        function () {\n          this.search();\n        }.bind(this),\n        this.state.intervalBeforeRequest\n      );\n    }\n  }\n\n  search() {\n    this.props.callback(this.state.searchText);\n    this.setState({lockRequest:false})\n  }\n  handleOnClick() {\n    this.search();\n  }\n}\nexport default SearchBar;\n","import React from \"react\";\n\nconst IMAGE_URL = \"https://image.tmdb.org/t/p/w500\";\n\nconst VideoListItem = (props) => {\n  const {movie} = props;\n  let avis = movie.vote_average * 10;\n console.log(avis);\n \n  \n  return (\n    <li className=\"list-group-item\" onClick={handleOnClick}>\n      <div className=\"media\">\n        <div className=\"media-left\">\n          <img\n            className=\"media-object img-rounded\"\n            height=\"100px\"\n            width=\"100px\"\n            src={`${IMAGE_URL}${movie.poster_path}`}\n            alt=\"film\"\n          />\n        </div>\n        <div className=\"media-body\">\n          <h5 className=\"title_list\">{movie.title}</h5>\n        </div>\n      </div>\n    </li>\n  );\n\n  function handleOnClick(){\n    props.callback(movie);\n    \n  }\n};\n\nexport default VideoListItem;\n","import React from \"react\";\nimport VideoListItem from \"../components/videoListItem\";\n\nconst VideoList = (props) => {\n  const { movieList } = props;\n  console.log(movieList);\n  return (\n    <div>\n      <ul>\n        {movieList.map((movie) => {\n          return (\n            <VideoListItem\n              key={movie.id}\n              movie={movie}\n              callback={receiveCallBack}\n            />\n          );\n        })}\n      </ul>\n    </div>\n  );\n  function receiveCallBack(movie) {\n    props.callback(movie);\n  }\n};\n\nexport default VideoList;\n","import React from \"react\";\n\nconst VideoDetail = ({ title, description, avis }) => {\n  \n  return (\n    <div>\n      <h1>{title}</h1>\n      <p>{description}</p>\n      <p>{avis} % des utilisateurs ont aimé ce film</p>\n    </div>\n  );\n};\n\nexport default VideoDetail;\n","import React from 'react';\n\nconst BASE_URL = \"https://www.youtube.com/embed/\";\n\nconst Video = ({videoId}) => {\n    return(\n        <div className=\"embed-responsive embed-responsive-16by9\">\n            <iframe className=\"embed-responsive-item\" src={`${BASE_URL}${videoId}`}/>\n        </div>\n    )\n}\n\nexport default Video;","import React, { Component } from \"react\";\nimport SearchBar from \"../components/searchBar\";\nimport VideoList from \"./videoList\";\nimport axios from \"axios\";\nimport VideoDetail from \"../components/videoDetail\";\nimport Video from \"../components/Video\";\n\nconst API_END_POINT = \"https://api.themoviedb.org/3/\";\nconst POPULAR_MOVIES_URL =\n  \"discover/movie?language=fr&sort_by=popularity.desc&include_adult=false&append_to_response=images\";\nconst API_KEY = \"api_key=83c6111d367f0146a56cb5c464466b1b\";\nconst SEARCH_URL = \"search/movie?language=fr&include_adult=false\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { movieList: {}, currentMovie: {} };\n  }\n  //Quand le composant va être chargé\n  componentWillMount() {\n    this.initMovies();\n  }\n\n  initMovies() {\n    //Etabli la requete puis transmets la réponse à la requête dans response\n    axios.get(`${API_END_POINT}${POPULAR_MOVIES_URL}&${API_KEY}`).then(\n      function (response) {\n        //Récupère les 5 films les plus populaires à partir de l'index 1\n        //Récupère le film le plus populaire\n        this.setState(\n          {\n            movieList: response.data.results.slice(1, 6),\n            currentMovie: response.data.results[0],\n          },\n          function () {\n            this.applyVideoToCurrentMovie();\n          }\n        );\n\n        console.log(this.state.movieList);\n        console.log(this.state.currentMovie);\n      }.bind(this)\n    );\n  }\n\n  applyVideoToCurrentMovie() {\n    //Etabli la requete puis transmets la réponse à la requête dans response\n    axios\n      .get(\n        `${API_END_POINT}movie/${this.state.currentMovie.id}?${API_KEY}&append_to_response=videos&include_adult=false`\n      )\n      .then(\n        function (response) {\n          const youtubeKey = response.data.videos.results[0].key;\n          let newCurrentMovieState = this.state.currentMovie;\n          newCurrentMovieState.videoId = youtubeKey;\n          this.setState({ currentMovie: newCurrentMovieState });\n\n          console.log(newCurrentMovieState);\n        }.bind(this)\n      );\n  }\n\n  onClickListItem(movie) {\n    this.setState({ currentMovie: movie }, function () {\n      this.applyVideoToCurrentMovie();\n      this.setRecommendation();\n    });\n  }\n\n  setRecommendation(){\n    axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}/recommendations?${API_KEY}&language=fr`).then(\n      function (response) {\n        //Récupère les 5 films les plus populaires à partir de l'index 1\n        //Récupère le film le plus populaire\n        this.setState(\n          {\n            movieList: response.data.results.slice(0, 5)\n          });\n      }.bind(this)\n    );\n  }\n\n  onClickSearch(searchText) {\n    if (searchText) {\n      axios\n        .get(`${API_END_POINT}${SEARCH_URL}&${API_KEY}&query=${searchText}`)\n        .then(\n          function (response) {\n            if(response.data && response.data.results[0]){\n                if(response.data.results[0].id !== this.state.currentMovie.id){\n                    this.setState({currentMovie: response.data.results[0]}, () => {\n                      this.applyVideoToCurrentMovie();\n                      this.setRecommendation();\n                    })\n                }\n            }\n           \n          }.bind(this)\n        );\n    }\n\n    console.log(searchText);\n  }\n  render() {\n    const renderVideoList = () => {\n      if (this.state.movieList.length >= 5) {\n        return (\n          <VideoList\n            movieList={this.state.movieList}\n            callback={this.onClickListItem.bind(this)}\n          />\n        );\n      }\n    };\n    return (\n      <div>\n        <div className=\"search_bar\">\n          <SearchBar callback={this.onClickSearch.bind(this)} />\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-8\">\n            <Video videoId={this.state.currentMovie.videoId} />\n            <VideoDetail\n              title={this.state.currentMovie.title}\n              description={this.state.currentMovie.overview}\n              avis={this.state.currentMovie.vote_average*10}\n            />\n          </div>\n          <div className=\"col-md-4\">{renderVideoList()}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App';\n\n\n\n\nReactDOM.render(<App/>, document.querySelector('.container'));"],"sourceRoot":""}